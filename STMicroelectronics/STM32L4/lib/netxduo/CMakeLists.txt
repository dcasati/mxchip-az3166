# Copyright (c) Microsoft Corporation.
# Licensed under the MIT License.

set(SOURCES
    src/nxde_tcp_client_socket_connect.c
    src/nxde_tcp_socket_peer_info_get.c
    src/nxde_udp_socket_send.c
    src/nxd_tcp_client_socket_connect.c
    src/nxd_udp_socket_send.c
    src/nxe_ip_create.c
    src/nxe_ip_delete.c
    src/nxe_packet_allocate.c
    src/nxe_packet_copy.c
    src/nxe_packet_data_append.c
    src/nxe_packet_data_extract_offset.c
    src/nxe_packet_data_retrieve.c
    src/nxe_packet_length_get.c
    src/nxe_packet_pool_create.c
    src/nxe_packet_pool_delete.c
    src/nxe_packet_pool_info_get.c
    src/nxe_packet_pool_low_watermark_set.c
    src/nxe_packet_release.c
    src/nxe_packet_transmit_release.c
    src/nxe_secure_dtls_client_protocol_version_override.c
    src/nxe_secure_dtls_client_session_start.c
    src/nxe_secure_dtls_ecc_initialize.c
    src/nxe_secure_dtls_packet_allocate.c
    src/nxe_secure_dtls_psk_add.c
    src/nxe_secure_dtls_server_create.c
    src/nxe_secure_dtls_server_delete.c
    src/nxe_secure_dtls_server_ecc_initialize.c
    src/nxe_secure_dtls_server_local_certificate_add.c
    src/nxe_secure_dtls_server_local_certificate_remove.c
    src/nxe_secure_dtls_server_notify_set.c
    src/nxe_secure_dtls_server_protocol_version_override.c
    src/nxe_secure_dtls_server_psk_add.c
    src/nxe_secure_dtls_server_session_send.c
    src/nxe_secure_dtls_server_session_start.c
    src/nxe_secure_dtls_server_start.c
    src/nxe_secure_dtls_server_stop.c
    src/nxe_secure_dtls_server_trusted_certificate_add.c
    src/nxe_secure_dtls_server_trusted_certificate_remove.c
    src/nxe_secure_dtls_server_x509_client_verify_configure.c
    src/nxe_secure_dtls_server_x509_client_verify_disable.c
    src/nxe_secure_dtls_session_client_info_get.c
    src/nxe_secure_dtls_session_create.c
    src/nxe_secure_dtls_session_delete.c
    src/nxe_secure_dtls_session_end.c
    src/nxe_secure_dtls_session_local_certificate_add.c
    src/nxe_secure_dtls_session_local_certificate_remove.c
    src/nxe_secure_dtls_session_receive.c
    src/nxe_secure_dtls_session_reset.c
    src/nxe_secure_dtls_session_send.c
    src/nxe_secure_dtls_session_start.c
    src/nxe_secure_dtls_session_trusted_certificate_add.c
    src/nxe_secure_dtls_session_trusted_certificate_remove.c
    src/nxe_secure_tls_active_certificate_set.c
    src/nxe_secure_tls_client_psk_set.c
    src/nxe_secure_tls_local_certificate_add.c
    src/nxe_secure_tls_local_certificate_find.c
    src/nxe_secure_tls_local_certificate_remove.c
    src/nxe_secure_tls_metadata_size_calculate.c
    src/nxe_secure_tls_packet_allocate.c
    src/nxe_secure_tls_psk_add.c
    src/nxe_secure_tls_remote_certificate_allocate.c
    src/nxe_secure_tls_remote_certificate_buffer_allocate.c
    src/nxe_secure_tls_remote_certificate_free_all.c
    src/nxe_secure_tls_server_certificate_add.c
    src/nxe_secure_tls_server_certificate_find.c
    src/nxe_secure_tls_server_certificate_remove.c
    src/nxe_secure_tls_session_alert_value_get.c
    src/nxe_secure_tls_session_certificate_callback_set.c
    src/nxe_secure_tls_session_client_callback_set.c
    src/nxe_secure_tls_session_client_verify_disable.c
    src/nxe_secure_tls_session_client_verify_enable.c
    src/nxe_secure_tls_session_create.c
    src/nxe_secure_tls_session_delete.c
    src/nxe_secure_tls_session_end.c
    src/nxe_secure_tls_session_packet_buffer_set.c
    src/nxe_secure_tls_session_protocol_version_override.c
    src/nxe_secure_tls_session_receive.c
    src/nxe_secure_tls_session_renegotiate.c
    src/nxe_secure_tls_session_renegotiate_callback_set.c
    src/nxe_secure_tls_session_reset.c
    src/nxe_secure_tls_session_send.c
    src/nxe_secure_tls_session_server_callback_set.c
    src/nxe_secure_tls_session_sni_extension_parse.c
    src/nxe_secure_tls_session_sni_extension_set.c
    src/nxe_secure_tls_session_start.c
    src/nxe_secure_tls_session_time_function_set.c
    src/nxe_secure_tls_session_x509_client_verify_configure.c
    src/nxe_secure_tls_trusted_certificate_add.c
    src/nxe_secure_tls_trusted_certificate_remove.c
    src/nxe_secure_x509_certificate_initialize.c
    src/nxe_secure_x509_common_name_dns_check.c
    src/nxe_secure_x509_crl_revocation_check.c
    src/nxe_secure_x509_dns_name_initialize.c
    src/nxe_secure_x509_extended_key_usage_extension_parse.c
    src/nxe_secure_x509_extension_find.c
    src/nxe_secure_x509_key_usage_extension_parse.c
    src/nxe_tcp_client_socket_bind.c
    src/nxe_tcp_client_socket_connect.c
    src/nxe_tcp_client_socket_unbind.c
    src/nxe_tcp_enable.c
    src/nxe_tcp_socket_create.c
    src/nxe_tcp_socket_delete.c
    src/nxe_tcp_socket_disconnect.c
    src/nxe_tcp_socket_establish_notify.c
    src/nxe_tcp_socket_receive.c
    src/nxe_tcp_socket_receive_notify.c
    src/nxe_tcp_socket_send.c
    src/nxe_tcp_socket_state_wait.c
    src/nxe_udp_enable.c
    src/nxe_udp_socket_bind.c
    src/nxe_udp_socket_create.c
    src/nxe_udp_socket_delete.c
    src/nxe_udp_socket_receive.c
    src/nxe_udp_socket_receive_notify.c
    src/nxe_udp_socket_send.c
    src/nxe_udp_socket_unbind.c
    src/nx_crypto_3des.c
    src/nx_crypto_aes.c
    src/nx_crypto_cbc.c
    src/nx_crypto_ccm.c
    src/nx_crypto_ctr.c
    src/nx_crypto_des.c
    src/nx_crypto_dh.c
    src/nx_crypto_drbg.c
    src/nx_crypto_ec.c
    src/nx_crypto_ecdh.c
    src/nx_crypto_ecdsa.c
    src/nx_crypto_ecjpake.c
    src/nx_crypto_ec_secp192r1_fixed_points.c
    src/nx_crypto_ec_secp224r1_fixed_points.c
    src/nx_crypto_ec_secp256r1_fixed_points.c
    src/nx_crypto_ec_secp384r1_fixed_points.c
    src/nx_crypto_ec_secp521r1_fixed_points.c
    src/nx_crypto_gcm.c
    src/nx_crypto_generic_ciphersuites.c
    src/nx_crypto_hkdf.c
    src/nx_crypto_hmac.c
    src/nx_crypto_hmac_md5.c
    src/nx_crypto_hmac_sha1.c
    src/nx_crypto_hmac_sha2.c
    src/nx_crypto_hmac_sha5.c
    src/nx_crypto_huge_number.c
    src/nx_crypto_huge_number_extended.c
    src/nx_crypto_initialize.c
    src/nx_crypto_md5.c
    src/nx_crypto_methods.c
    src/nx_crypto_method_self_test.c
    src/nx_crypto_method_self_test_3des.c
    src/nx_crypto_method_self_test_aes.c
    src/nx_crypto_method_self_test_des.c
    src/nx_crypto_method_self_test_drbg.c
    src/nx_crypto_method_self_test_ecdh.c
    src/nx_crypto_method_self_test_ecdsa.c
    src/nx_crypto_method_self_test_hmac_md5.c
    src/nx_crypto_method_self_test_hmac_sha.c
    src/nx_crypto_method_self_test_md5.c
    src/nx_crypto_method_self_test_pkcs1.c
    src/nx_crypto_method_self_test_prf.c
    src/nx_crypto_method_self_test_rsa.c
    src/nx_crypto_method_self_test_sha.c
    src/nx_crypto_module_start.c
    src/nx_crypto_null_cipher.c
    src/nx_crypto_phash.c
    src/nx_crypto_pkcs1_v1.5.c
    src/nx_crypto_rsa.c
    src/nx_crypto_sha1.c
    src/nx_crypto_sha2.c
    src/nx_crypto_sha5.c
    src/nx_crypto_tls_prf_1.c
    src/nx_crypto_tls_prf_sha256.c
    src/nx_crypto_tls_prf_sha384.c
    src/nx_crypto_tls_prf_sha512.c
    src/nx_crypto_xcbc_mac.c
    src/nx_ip_create.c
    src/nx_ip_delete.c
    src/nx_ip_initialize.c
    src/nx_packet_allocate.c
    src/nx_packet_copy.c
    src/nx_packet_data_adjust.c
    src/nx_packet_data_append.c
    src/nx_packet_data_extract_offset.c
    src/nx_packet_data_retrieve.c
    src/nx_packet_debug_info_get.c
    src/nx_packet_length_get.c
    src/nx_packet_pool_cleanup.c
    src/nx_packet_pool_create.c
    src/nx_packet_pool_delete.c
    src/nx_packet_pool_info_get.c
    src/nx_packet_pool_initialize.c
    src/nx_packet_pool_low_watermark_set.c
    src/nx_packet_release.c
    src/nx_packet_transmit_release.c
    src/nx_secure_crypto_method_self_test_3des.c
    src/nx_secure_crypto_method_self_test_aes.c
    src/nx_secure_crypto_method_self_test_des.c
    src/nx_secure_crypto_method_self_test_hmac_md5.c
    src/nx_secure_crypto_method_self_test_hmac_sha.c
    src/nx_secure_crypto_method_self_test_md5.c
    src/nx_secure_crypto_method_self_test_prf.c
    src/nx_secure_crypto_method_self_test_rsa.c
    src/nx_secure_crypto_method_self_test_sha.c
    src/nx_secure_crypto_rng_self_test.c
    src/nx_secure_crypto_table_self_test.c
    src/nx_secure_dtls_allocate_handshake_packet.c
    src/nx_secure_dtls_client_handshake.c
    src/nx_secure_dtls_client_protocol_version_override.c
    src/nx_secure_dtls_client_session_start.c
    src/nx_secure_dtls_ecc_initialize.c
    src/nx_secure_dtls_hash_record.c
    src/nx_secure_dtls_initialize.c
    src/nx_secure_dtls_packet_allocate.c
    src/nx_secure_dtls_process_clienthello.c
    src/nx_secure_dtls_process_handshake_header.c
    src/nx_secure_dtls_process_header.c
    src/nx_secure_dtls_process_helloverifyrequest.c
    src/nx_secure_dtls_process_record.c
    src/nx_secure_dtls_psk_add.c
    src/nx_secure_dtls_receive_callback.c
    src/nx_secure_dtls_retransmit.c
    src/nx_secure_dtls_retransmit_queue_flush.c
    src/nx_secure_dtls_send_clienthello.c
    src/nx_secure_dtls_send_handshake_record.c
    src/nx_secure_dtls_send_helloverifyrequest.c
    src/nx_secure_dtls_send_record.c
    src/nx_secure_dtls_send_serverhello.c
    src/nx_secure_dtls_server_create.c
    src/nx_secure_dtls_server_delete.c
    src/nx_secure_dtls_server_ecc_initialize.c
    src/nx_secure_dtls_server_handshake.c
    src/nx_secure_dtls_server_local_certificate_add.c
    src/nx_secure_dtls_server_local_certificate_remove.c
    src/nx_secure_dtls_server_notify_set.c
    src/nx_secure_dtls_server_protocol_version_override.c
    src/nx_secure_dtls_server_psk_add.c
    src/nx_secure_dtls_server_session_send.c
    src/nx_secure_dtls_server_session_start.c
    src/nx_secure_dtls_server_start.c
    src/nx_secure_dtls_server_stop.c
    src/nx_secure_dtls_server_trusted_certificate_add.c
    src/nx_secure_dtls_server_trusted_certificate_remove.c
    src/nx_secure_dtls_server_x509_client_verify_configure.c
    src/nx_secure_dtls_server_x509_client_verify_disable.c
    src/nx_secure_dtls_session_cache.c
    src/nx_secure_dtls_session_client_info_get.c
    src/nx_secure_dtls_session_create.c
    src/nx_secure_dtls_session_delete.c
    src/nx_secure_dtls_session_end.c
    src/nx_secure_dtls_session_local_certificate_add.c
    src/nx_secure_dtls_session_local_certificate_remove.c
    src/nx_secure_dtls_session_receive.c
    src/nx_secure_dtls_session_reset.c
    src/nx_secure_dtls_session_send.c
    src/nx_secure_dtls_session_start.c
    src/nx_secure_dtls_session_trusted_certificate_add.c
    src/nx_secure_dtls_session_trusted_certificate_remove.c
    src/nx_secure_dtls_verify_mac.c
    src/nx_secure_module_hash_compute.c
    src/nx_secure_tls_1_3_client_handshake.c
    src/nx_secure_tls_1_3_crypto_init.c
    src/nx_secure_tls_1_3_finished_hash_generate.c
    src/nx_secure_tls_1_3_generate_keys.c
    src/nx_secure_tls_1_3_server_handshake.c
    src/nx_secure_tls_1_3_session_keys_set.c
    src/nx_secure_tls_1_3_transcript_hash_save.c
    src/nx_secure_tls_active_certificate_set.c
    src/nx_secure_tls_allocate_handshake_packet.c
    src/nx_secure_tls_check_protocol_version.c
    src/nx_secure_tls_ciphersuite_lookup.c
    src/nx_secure_tls_client_handshake.c
    src/nx_secure_tls_client_psk_set.c
    src/nx_secure_tls_ecc_generate_keys.c
    src/nx_secure_tls_ecc_initialize.c
    src/nx_secure_tls_find_curve_method.c
    src/nx_secure_tls_finished_hash_generate.c
    src/nx_secure_tls_generate_keys.c
    src/nx_secure_tls_generate_premaster_secret.c
    src/nx_secure_tls_handshake_hash_init.c
    src/nx_secure_tls_handshake_hash_update.c
    src/nx_secure_tls_handshake_process.c
    src/nx_secure_tls_hash_record.c
    src/nx_secure_tls_initialize.c
    src/nx_secure_tls_key_material_init.c
    src/nx_secure_tls_local_certificate_add.c
    src/nx_secure_tls_local_certificate_find.c
    src/nx_secure_tls_local_certificate_remove.c
    src/nx_secure_tls_map_error_to_alert.c
    src/nx_secure_tls_metadata_size_calculate.c
    src/nx_secure_tls_newest_supported_version.c
    src/nx_secure_tls_packet_allocate.c
    src/nx_secure_tls_process_certificate_request.c
    src/nx_secure_tls_process_certificate_verify.c
    src/nx_secure_tls_process_changecipherspec.c
    src/nx_secure_tls_process_clienthello.c
    src/nx_secure_tls_process_clienthello_extensions.c
    src/nx_secure_tls_process_client_key_exchange.c
    src/nx_secure_tls_process_encrypted_extensions.c
    src/nx_secure_tls_process_finished.c
    src/nx_secure_tls_process_handshake_header.c
    src/nx_secure_tls_process_header.c
    src/nx_secure_tls_process_newsessionticket.c
    src/nx_secure_tls_process_record.c
    src/nx_secure_tls_process_remote_certificate.c
    src/nx_secure_tls_process_serverhello.c
    src/nx_secure_tls_process_serverhello_extensions.c
    src/nx_secure_tls_process_server_key_exchange.c
    src/nx_secure_tls_protocol_version_get.c
    src/nx_secure_tls_psk_add.c
    src/nx_secure_tls_psk_binder_generate.c
    src/nx_secure_tls_psk_find.c
    src/nx_secure_tls_psk_identity_find.c
    src/nx_secure_tls_record_hash_calculate.c
    src/nx_secure_tls_record_hash_initialize.c
    src/nx_secure_tls_record_hash_update.c
    src/nx_secure_tls_record_payload_decrypt.c
    src/nx_secure_tls_record_payload_encrypt.c
    src/nx_secure_tls_remote_certificate_allocate.c
    src/nx_secure_tls_remote_certificate_buffer_allocate.c
    src/nx_secure_tls_remote_certificate_free.c
    src/nx_secure_tls_remote_certificate_free_all.c
    src/nx_secure_tls_remote_certificate_verify.c
    src/nx_secure_tls_send_alert.c
    src/nx_secure_tls_send_certificate.c
    src/nx_secure_tls_send_certificate_request.c
    src/nx_secure_tls_send_certificate_verify.c
    src/nx_secure_tls_send_changecipherspec.c
    src/nx_secure_tls_send_clienthello.c
    src/nx_secure_tls_send_clienthello_extensions.c
    src/nx_secure_tls_send_client_key_exchange.c
    src/nx_secure_tls_send_encrypted_extensions.c
    src/nx_secure_tls_send_finished.c
    src/nx_secure_tls_send_handshake_record.c
    src/nx_secure_tls_send_hellorequest.c
    src/nx_secure_tls_send_newsessionticket.c
    src/nx_secure_tls_send_record.c
    src/nx_secure_tls_send_serverhello.c
    src/nx_secure_tls_send_serverhello_extensions.c
    src/nx_secure_tls_send_server_key_exchange.c
    src/nx_secure_tls_server_certificate_add.c
    src/nx_secure_tls_server_certificate_find.c
    src/nx_secure_tls_server_certificate_remove.c
    src/nx_secure_tls_server_handshake.c
    src/nx_secure_tls_session_alert_value_get.c
    src/nx_secure_tls_session_certificate_callback_set.c
    src/nx_secure_tls_session_client_callback_set.c
    src/nx_secure_tls_session_client_verify_disable.c
    src/nx_secure_tls_session_client_verify_enable.c
    src/nx_secure_tls_session_create.c
    src/nx_secure_tls_session_create_ext.c
    src/nx_secure_tls_session_delete.c
    src/nx_secure_tls_session_end.c
    src/nx_secure_tls_session_iv_size_get.c
    src/nx_secure_tls_session_keys_set.c
    src/nx_secure_tls_session_packet_buffer_set.c
    src/nx_secure_tls_session_protocol_version_override.c
    src/nx_secure_tls_session_receive.c
    src/nx_secure_tls_session_receive_records.c
    src/nx_secure_tls_session_renegotiate.c
    src/nx_secure_tls_session_renegotiate_callback_set.c
    src/nx_secure_tls_session_reset.c
    src/nx_secure_tls_session_send.c
    src/nx_secure_tls_session_server_callback_set.c
    src/nx_secure_tls_session_sni_extension_parse.c
    src/nx_secure_tls_session_sni_extension_set.c
    src/nx_secure_tls_session_start.c
    src/nx_secure_tls_session_time_function_set.c
    src/nx_secure_tls_session_x509_client_verify_configure.c
    src/nx_secure_tls_shutdown.c
    src/nx_secure_tls_trusted_certificate_add.c
    src/nx_secure_tls_trusted_certificate_remove.c
    src/nx_secure_tls_verify_mac.c
    src/nx_secure_x509.c
    src/nx_secure_x509_asn1_tlv_block_parse.c
    src/nx_secure_x509_certificate_chain_verify.c
    src/nx_secure_x509_certificate_initialize.c
    src/nx_secure_x509_certificate_list_add.c
    src/nx_secure_x509_certificate_list_find.c
    src/nx_secure_x509_certificate_list_remove.c
    src/nx_secure_x509_certificate_revocation_list_parse.c
    src/nx_secure_x509_certificate_verify.c
    src/nx_secure_x509_common_name_dns_check.c
    src/nx_secure_x509_crl_revocation_check.c
    src/nx_secure_x509_crl_verify.c
    src/nx_secure_x509_distinguished_name_compare.c
    src/nx_secure_x509_distinguished_name_parse.c
    src/nx_secure_x509_dns_name_initialize.c
    src/nx_secure_x509_ec_private_key_parse.c
    src/nx_secure_x509_expiration_check.c
    src/nx_secure_x509_extended_key_usage_extension_parse.c
    src/nx_secure_x509_extension_find.c
    src/nx_secure_x509_find_certificate_methods.c
    src/nx_secure_x509_free_certificate_get.c
    src/nx_secure_x509_key_usage_extension_parse.c
    src/nx_secure_x509_local_certificate_find.c
    src/nx_secure_x509_local_device_certificate_get.c
    src/nx_secure_x509_oid_parse.c
    src/nx_secure_x509_pkcs1_rsa_private_key_parse.c
    src/nx_secure_x509_pkcs7_decode.c
    src/nx_secure_x509_remote_endpoint_certificate_get.c
    src/nx_secure_x509_store_certificate_add.c
    src/nx_secure_x509_store_certificate_find.c
    src/nx_secure_x509_store_certificate_remove.c
    src/nx_secure_x509_subject_alt_names_find.c
    src/nx_secure_x509_wildcard_compare.c
    src/nx_system_initialize.c
    src/nx_tcp_client_socket_bind.c
    src/nx_tcp_client_socket_connect.c
    src/nx_tcp_client_socket_unbind.c
    src/nx_tcp_enable.c
    src/nx_tcp_free_port_find.c
    src/nx_tcp_initialize.c
    src/nx_tcp_socket_block_cleanup.c
    src/nx_tcp_socket_create.c
    src/nx_tcp_socket_delete.c
    src/nx_tcp_socket_disconnect.c
    src/nx_tcp_socket_establish_notify.c
    src/nx_tcp_socket_receive.c
    src/nx_tcp_socket_receive_notify.c
    src/nx_tcp_socket_send.c
    src/nx_tcp_socket_state_wait.c
    src/nx_udp_enable.c
    src/nx_udp_free_port_find.c
    src/nx_udp_socket_bind.c
    src/nx_udp_socket_create.c
    src/nx_udp_socket_delete.c
    src/nx_udp_socket_receive.c
    src/nx_udp_socket_receive_notify.c
    src/nx_udp_socket_send.c
    src/nx_udp_socket_unbind.c
    src/nx_utility.c

    addons/dns/nxd_dns.c
    addons/sntp/nxd_sntp_client.c
    addons/mqtt/nxd_mqtt_client.c
)

set(TARGET netxduo)

add_library(${TARGET} OBJECT
    ${SOURCES}
)
add_library("azrtos::${TARGET}" ALIAS ${TARGET})

target_compile_definitions(${TARGET}
    PUBLIC 
        NX_INCLUDE_USER_DEFINE_FILE
)

target_include_directories(${TARGET} 
    PUBLIC 
        .
        src
		addons/dhcp
		addons/dns
        addons/sntp
        addons/mqtt
)

target_link_libraries(${TARGET} 
	PUBLIC
        azrtos::threadx
        stm32cubel4
)
